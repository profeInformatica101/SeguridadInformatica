<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Cifrado asimétrico con Forge</title>
  <script src="https://cdn.jsdelivr.net/npm/node-forge@0.10.0/dist/forge.min.js"></script>
  <script>
    // Generar un par de claves asimétricas
    const keypair = forge.pki.rsa.generateKeyPair({bits: 2048});

    function encrypt() {
      const plaintext = document.getElementById("inputText").value;

      // Cifrar el mensaje con la clave pública
      const encrypted = keypair.publicKey.encrypt(plaintext);

      // Mostrar el mensaje cifrado en la consola
      console.log("Mensaje cifrado: ", forge.util.encode64(encrypted));
      document.getElementById("outputText").value = forge.util.encode64(encrypted);
    }

    function decrypt() {
      const ciphertext = document.getElementById("outputText").value;

      // Decodificar el mensaje cifrado
      const decoded = forge.util.decode64(ciphertext);

      // Descifrar el mensaje con la clave privada
      const decrypted = keypair.privateKey.decrypt(decoded);

      // Mostrar el mensaje descifrado en la página
      document.getElementById("decryptedText").textContent = decrypted;
    }
  </script>
</head>
<body>
  <h1>Cifrado asimétrico con Forge</h1>
  <label for="inputText">Texto a cifrar:</label>
  <textarea id="inputText" rows="4" cols="50"></textarea><br><br>
  <button onclick="encrypt()">Cifrar</button><br><br>
  <label for="outputText">Texto cifrado:</label>
  <textarea id="outputText" rows="4" cols="50"></textarea><br><br>
  <button onclick="decrypt()">Descifrar</button><br><br>
  <label for="decryptedText">Texto descifrado:</label>
  <textarea id="decryptedText" rows="4" cols="50" readonly></textarea>
</body>
</html>
